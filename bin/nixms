#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=C


"service"


from nixm.command import NAME, scanner
from nixm.modules import face
from nixm.persist import pidfile, pidname
from nixm.runtime import errors, forever, privileges, wrap


scan = scanner

def main():
    privileges()
    pidfile(pidname(NAME))
    scan(face, init=True)
    forever()


def wrapped():
    wrap(main)
    for txt in errors():
        print(txt)


if __name__ == "__main__":
    wrapped()
